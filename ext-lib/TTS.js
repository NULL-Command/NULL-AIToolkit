/*! For license information please see TTS.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TTS=t():e.TTS=t()}(self,(()=>(()=>{var e={913:e=>{e.exports=function(e,t){if("undefined"==typeof Blob||!(e instanceof Blob))throw new Error("first argument must be a Blob");if("function"!=typeof t)throw new Error("second argument must be a function");const o=new FileReader;o.addEventListener("loadend",(function e(r){o.removeEventListener("loadend",e,!1),r.error?t(r.error):t(null,Buffer.from(o.result))}),!1),o.readAsArrayBuffer(e)}},164:(e,t,o)=>{const{ttsOpenAIGetBlob:r,ttsOpenAIGetFile:n}=o(986);e.exports={ttsOpenAIGetBlob:r,ttsOpenAIGetFile:n}},986:(e,t,o)=>{o(913);const r=o(899),n=async(e,t,o,r)=>{const n=await fetch("https://api.ttsopenai.com/api/v1/public/text-to-speech-stream",{headers:{accept:"application/json","accept-language":"en-US,en;q=0.9",authorization:"","content-type":"application/json",priority:"u=1, i","sec-ch-ua":'"Not)A;Brand";v="99", "Google Chrome";v="127", "Chromium";v="127"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-site",Referer:"https://ttsopenai.com/","Referrer-Policy":"strict-origin-when-cross-origin"},body:JSON.stringify({model:r,speed:o,input:e,voice_id:"OA00"+t}),method:"POST"});return n.ok?await n.blob():null},i=async e=>{const t=await Promise.all(e.map((e=>e.arrayBuffer()))),o=t.reduce(((e,t)=>e+t.byteLength),0),r=new Uint8Array(o);let n=0;for(const e of t)r.set(new Uint8Array(e),n),n+=e.byteLength;return new Blob([r],{type:"audio/mpeg"})},a=(e,t)=>{let o=(e=e.trim()).length,r=[];for(;o>t;){let n=t;for(;n>0&&" "!==e[n];)n--;0===n&&(n=t),r.push(e.substring(0,n).trim()),o=(e=e.substring(n).trim()).length}return o>0&&r.push(e),r},s=e=>{const t=["text","voiceId","voiceSpeed","voiceModel","duration"];for(const o of t)if(!(o in e))throw new Error(`Missing required key: ${o}. Example of valid JSON: { "text": "Some text", "voiceId": 1, "voiceSpeed": 1.5, "voiceModel": "tts-1", "duration": 100 }`);if("string"!=typeof e.text||0===e.text.trim().length)throw new Error('Invalid value for key "text". It must be a non-empty string. Example: "Some valid text."');if("number"!=typeof e.voiceId||e.voiceId<1||e.voiceId>6)throw new Error('Invalid value for key "voiceId". It must be a number between 1 and 6. Example: 1');const o=[1,1.25,1.5,1.75,2];if(!o.includes(e.voiceSpeed))throw new Error(`Invalid value for key "voiceSpeed". It must be one of ${o.join(", ")}. Example: 1.5`);if("tts-1"!==e.voiceModel)throw new Error('Invalid value for key "voiceModel". It must be "tts-1". Example: "tts-1"');if("number"!=typeof e.duration||e.duration<50||e.duration>450)throw new Error('Invalid value for key "duration". It must be a number between 50 and 450. Example: 100');return!0};e.exports={ttsOpenAIGetBlob:async e=>{s(e);try{const t=a(e.text,e.duration).map((t=>n(t,e.voiceId,e.voiceSpeed,e.voiceModel))),o=await Promise.all(t);return await i(o)}catch(e){return null}},ttsOpenAIGetFile:async(e,t)=>{s(e);try{const o=a(e.text,e.duration).map((t=>n(t,e.voiceId,e.voiceSpeed,e.voiceModel))),s=await Promise.all(o);let c=await i(s);const l=await c.arrayBuffer(),d=Buffer.from(l);r.writeFile(t,d,(e=>{e?console.error("Failed to save file:",e):console.log("File saved successfully:",t)}))}catch(e){console.error("Error during text to speech conversion:",e)}}}},899:()=>{}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";o.r(r),o.d(r,{ttsOpenAIGetBlob:()=>e.ttsOpenAIGetBlob});var e=o(164)})(),r})()));